<!DOCTYPE html>
<html style="height: 100%; margin: 0;">

<head>
<title>CityPark</title>

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="scripts/leaflet/leaflet.css">
<script src="scripts/leaflet/leaflet.js"></script>
<body style="height: 100%; margin: 0;">

<div id="map" style="width: 100%; height: 100%; background-color: #888888;">

<script type="text/javascript">
// Variables
var mapSW = [0, 4096],
    mapNE = [4096, 0];

// Declare map object
var map = L.map('map').setView([0,0], 0);

// Reference the tiles
L.tileLayer('maps/citypark/{z}/{x}/{y}.png', {
    minZoom: 0,
    maxZoom: 4,
    continuousWorld: false,
    noWrap: true,
    crs: L.CRS.Simple,
}).addTo(map);

map.setMaxBounds(new L.LatLngBounds(
    map.unproject(mapSW, map.getMaxZoom()),
    map.unproject(mapNE, map.getMaxZoom())
));

// Markers and Popups
// LatLng
var marker = L.marker([70,-160], {
    draggable: true,
}).addTo(map);
marker.bindPopup('');

// Pixels
var marker_heroes = L.marker(map.unproject([1904, 1968], map.getMaxZoom())).addTo(map);
marker_heroes.bindPopup('<b>Here we are!</b>').openPopup();

marker.on('dragend', function(e) {
    marker.getPopup().setContent(marker.getLatLng().toString() + '<br/>'
    + 'Pixels ' + map.project(marker.getLatLng(), map.getMaxZoom()).toString()
    ).openOn(map);
});

</script>
</div>
</body>
</head>

</html>